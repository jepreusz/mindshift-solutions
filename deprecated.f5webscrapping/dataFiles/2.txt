





 

 
 

 






 
Overview: Configuring cost-based load balancing

 
 


Important: This functionality is not currently available in the U.S.

  
 You can
   configure BIG-IP
   Link Controller to use cost-based load balancing to manage the traffic
   flowing in and out of a network. In cost-based load balancing, you prioritize link usage based on
   the cost of the bandwidth for the connection to the Internet. Link Controller sends traffic to
   the link that is currently operating at the lowest cost. As the usage cost for each link changes,
   Link Controller dynamically shifts traffic to the best link.

  
The following illustration shows a network for configuring a cost-based load balancing
   configuration.

  

   
  
Example of a network for configuring cost-based load balancing


  

  As the illustration shows, while traffic remains below a certain level (for example, 4 Mbps),
   the Link Controller uses the Primary Link. If traffic exceeds a certain level (for example, 4
   Mbps), the Link Controller sends the overflow traffic to the Secondary Link. If a link goes
   offline for any reason, Link Controller uses the Alternate and Fallback load balancing methods to
   route traffic through an available link.

 








 
Task summary

 
 


Important: This functionality is not currently available in the U.S.

  
Use the
   tasks in this implementation to create a cost-based, load balancing configuration to manage the
   traffic flowing in and out of a network.

  

Task list
   
  


 






    
Creating the first cost-based link for load balancing

    
    

        
Gather the IP address of the router associated with the ISP and IP address that
            corresponds with the external Internet connection. In addition, determine an amount of
            appropriate bandwidth for the link.

        
Create and configure the first link on Link Controllerto
            specify how traffic enters and leaves your network.

        


                
On the Main tab, click Link Controller > Links.
                 The Links List screen opens.
            


                
Click Create.
                 The New Link screen opens.
            


                
In the Name field, type a name for the link.
                 
                    

Important: Link names are limited to 63
                        characters.

                
            



                
In the Router Address field, type the IP address of the
                    router.
            



                
In the Uplink Address field, type the IP address that
                    corresponds with the external Internet connection.
            



                
For the Service Provider field, type the name of the ISP
                    provider.    
            



                
From the Configuration list, select
                        Advanced.
                 Additional controls display on the screen.
            


                
From the Weighting list, select Price
                        (Dynamic Ratio).
            



                
From the Prepaid Segment field, type the amount of
                    bandwidth that is prepaid for the link.
            



                
From the Incremental Segments field, add the incremental
                    segment price.
            



                
Click Create.
                 The Link List screen displays.
            



    








    
Creating the second cost-based link for load balancing

    
    

        
Gather the IP address of the router associated with the ISP and IP address that
            corresponds with the external Internet connection. In addition, determine an amount of
            appropriate bandwidth for the link.

        
Create and configure the second link on Link Controllerto specify how traffic enters and leaves your network.
        

        


                
On the Main tab, click Link Controller > Links.
                 The Links List screen opens.
            


                
Click Create.
                 The New Link screen opens.
            


                
In the Name field, type a name for the link.
                 
                    

Important: Link names are limited to 63
                        characters.

                
            



                
In the Router Address field, type the IP address of the
                    router.
            



                
In the Uplink Address field, type the IP address that
                    corresponds with the external Internet connection.
            



                
For the Service Provider field, type the name of the ISP
                    provider.    
            



                
From the Configuration list, select
                        Advanced.
                 Additional controls display on the screen.
            


                
From the Weighting list, select Price
                        (Dynamic Ratio).
            



                
From the Prepaid Segment field, type the amount of
                    bandwidth that is prepaid for the link.
            



                
Click Create.
                 The Link List screen displays.
            


                
From the Incremental Segments field, add the incremental
                    segment price.
            




    








    
Creating a default gateway pool

    
    

        
Gather the IP addresses associated with each link.

        
Create a default gateway pool to load balance the outbound traffic across the
            links.

        


    
On the Main tab, click Local Traffic > Pools. 
     The Pools list screen opens.
   


    
Click Create.
   



    
In the Name field, type a name for the pool.
     Names must begin with a letter, and can contain only letters, numbers, and the underscore
     (_) character.
Important: The pool name is limited to 63 characters.

   



     
In the New Members area, add the IP addresses associated with each link.
     

      

       
In the Address field, type the IP address.
      


      

       
Click Add.
      


     


    



    
Click Finished.
   




    








    
Creating a default route to the Internet 

    
    

       
        
Configure Link Controller to use the pool as the default
            gateway connection between the internal network and the Internet.

        


                
On the Main tab, click Network > Routes.
            



                
Click Add.
                 The New Route screen opens.
            


                
In the Name field, type a unique name.
            



                
From the Resource list, select Use
                        Pool.
            



                
From the Pool list, select
                        default_gateway_pool.
            



                
Click Finished.
            




    








    
Creating virtual servers to load balance connections across servers

    
    

        
Gather the IP addresses you want to use for creating the virtual servers.

        
Create two virtual servers, one for each link, to load balance inbound connections
            across the servers on the network.

        


                
On the Main tab, click Local Traffic > Virtual Servers.
                 The Virtual Server List screen opens.
            


                
Click the Create button.
                 The New Virtual Server screen opens.
            


                
In the Name field, type a unique name for the virtual
                    server. 
            



                
In the Destination Address field, type the IP address
                    you want to use for the virtual server.
            



                
In the Service Port field, type
                        80, or select HTTP from the
                    list. 
            



                
Click Finished.
            



                
Repeat these steps to create the second virtual server.
            




    








    
Creating a wildcard virtual server

    
    

        
Create a wildcard server to load balance outbound connections across the routers. 

        


                
On the Main tab, click Local Traffic > Virtual Servers.
                 The Virtual Server List screen opens.
            


                
Click the Create button.
                 The New Virtual Server screen opens.
            


                
In the Name field, type a unique name for the virtual
                    server. 
            



                
For the Destination setting, select
                        Host, and type 0.0.0.0 in the
                        Address field.
            



                
In the Service Port field, type
                    0.
                 
                    

Note: Port 0 defines a wildcard virtual
                        server that handles all types of services. If you specify a port number, you
                        create a port-specific wildcard virtual server. In that case, the wildcard
                        virtual server handles traffic only for the specified port. 

                
            



                
Click Finished.
            




    








    
Creating a wide IP

    
    

        
Before you can create a wide IP, you need IP addresses from two previously created
            virtual servers.

        
Create a wide IP to which Link Controller load balances
            incoming DNS requests.

        


    
On the Main tab, click Link Controller > Inbound Wide IPs. 
     The Wide IP List screen opens.
   


    
Click Create.
     The New Wide IP screen opens.
   


     
In the Name field, type a name for the wide IP.
    



     
From the Load Balancing Method list, make selections from the Preferred, Alternate, 
      and Fallback lists.
    



     
For the Member List field, add the address of the appropriate virtual server.
     

      

       
From the Virtual Server list, select a virtual server.
      


      

       
Click Add.
      


     


    



    
Click Create.
   




    










 
Implementation result

 
 

  
You now have Link Controller configured to use cost-based load balancing
   to manage DNS traffic. 

 












	        
Downloading the EUD Files

	
	        


         

	           
Deciding which files to download

	
	           

		             
There are several file types available from the F5® 
			download site http://downloads.f5.com for the EUD.

		
               

                  

				
				
				                 

					                   

						                     
File Name

						                     Description

					                   


				                 


				                 

					
					                   

						                     
IM file

						                     The IM file is a self-extracting installation file. You can
								scp this file directly to the VIPRION®
                               system and use it
							to upgrade the EUD on the system or load a USB flash
							drive.

					                   


					                   

						                     
MD5 file

						                     There is a corresponding MD5 file for each  IM file that 
							you download. Use the MD5 file to verify the integrity of the 
							file you download.

					                   


					                   

						                     
Readme-EUD.txt

						                     This file includes details about the release, such as
							supported platforms.

					                   


				                 


			               

               


	           


            

               
Determining the EUD version installed on the system

    
               

                  
Perform this task before you download update files to determine the EUD 
        	version installed on your system, or to verify that the installation of a new 
        	version was successful.

                  
To run the eud_info command and determine the EUD 
        	version installed on your system:

                  

                     

				                    
Log on to the command line of the system using an account with root 
					access.
			                  

                     

                        
Verify the EUD version installed on your system.
                        

                           
eud_info
                        

                     

                  


                  
The version number of the EUD installed on the system displays.

               


            

            

               
Downloading the EUD IM file from F5 Networks

    
               

                  
We recommend that you obtain the latest version of the EUD that is 
        	supported on your platform from the F5® download site 
        	(http://downloads.f5.com) before you run these tests.

                  

                     

                        
Log on to http://downloads.f5.com/ and click 
                	Find a Download.
                     

                     

                        
In the Hardware-Specific area, click
                    Platform / EUD.
                     

                     

                        
Select your platform from the list.
                     

                     

                        
Click the name of the release with the most recent date.
                        
You must accept the software terms and conditions before you can 
                	proceed.
                     

                     

                        
Click the file name <file_name>.im to start 
                	the download.
                        
The <file_name> consists of the platform 
                	family and the build number.
                        

                           

                              
Note: You should copy the IM file to 
                	/var/tmp on the system you intend to update.
                        

                     

                     

                        
Download the corresponding checksum file.
                        
The corresponding checksum file has the same name as the IM file, 
                	except that .md5 is the file extension.
                     

                  


                  
After the download is complete, you should verify the integrity of the 
        	file by checking the MD5 checksum.

               


            

         

      







Checklist: Auto Scaling application servers in AWS
This checklist summarizes the tasks required for BIG-IP® VE to discover application server (pool member) instances created by the AWS Auto Scaling service.

In BIG-IP VE, define attributes for future pool members BIG-IP VE needs to know how new pool members should be configured. Use an iApp for this information. In BIG-IP VE, set up pool member discovery BIG-IP VE will poll AWS every 10 minutes and update the pool with the latest pool members. You can change this interval. In AWS, create an image (AMI) of the application server instance you want to scale You will specify the image when you create the AWS launch configuration. In AWS, create the launch configuration, Auto Scaling group, and CloudWatch alarms The name you entered in the BIG-IP VE iApp for the pool member Auto Scaling group must be the name of the pool member Auto Scaling group in AWS. Each time a new application server instance is created, it is added to the BIG-IP pool.
Watch how to use Auto Scaling with application server instances in AWS

Define future pool member attributes
You must specify the properties that BIG-IP® VE should use when creating new pool members.

Log in to the BIG-IP Configuration utility.
On the Main tab, click iApps > AWS .
On the Application Service List screen, click Create.
In the Name field, type a name for the Auto Scaling template that will be used to configure new instances.
From the Template list, select the template f5-iAppLX-aws-autoscale and click Next.
In the Pool Name field, type the name of the pool you created in BIG-IP VE.
In the AWS AutoScale Group Name field, type the name of the Auto Scaling group. You will use this name in AWS when you create the Auto Scaling group.Important: If you have other Auto Scaling groups in AWS, ensure that this name is not a duplicate of one that already exists.


In the Port Number field, type the port number, based on the type of application this pool member serves.
Configure remaining settings as needed.
At the bottom of the screen, click Deploy to save your changes.



Set up pool member discovery
Communication must be set up so that BIG-IP® VE can discover application server (pool member) instances created by the AWS Auto Scaling service.

Use SSH to log in to the BIG-IP VE as admin.Ensure you are at the tmsh prompt, not the bash prompt.

Load a script that BIG-IP VE uses to poll AWS periodically for the list of active pool members.load sys config merge file /usr/share/aws/autoscale/aws-autoscale-icall-config

Save the changes.save /sys config


Polling happens every 10 minutes (600 seconds). To change the interval, run this case-sensitive tmsh command: modify sys icall handler periodic autoscaleHandler interval <number_of_seconds>
Now create an image (AMI) of the application server so you can use it for Auto Scaling.


Create a launch configuration for pool members
Before you can create a launch configuration for a pool member, you must have an Amazon machine image (AMI) of the pool member you want to use for Auto Scaling.
A launch configuration is a template that determines how new virtual instances will be launched.Note: Launch configurations cannot be revised after they are created.


In the AWS Management Console, from the Services menu at the top of the screen, select EC2.
In the Navigation pane, under AUTO SCALING, select Launch Configurations.
From the My AMIs list, select the pool member image.
Specify settings appropriate for your use.
Setting
Details
Enable CloudWatch detailed monitoring
Select this option.
Advanced Details > IP Address Type > Assign a public IP address to every instance
Select this option to assist with troubleshooting.
Advanced Details > User data > As text
If you want to use different credentials to launch new instances, enter this text:AWS_ACCESS_KEY,<user_access_key>
AWS_SECRET_KEY,<user_secret_key>

Configure Security Group
Select an existing group that is associated with the VPC.




Click Create launch configuration.



Create an Auto Scaling group for pool members
Auto Scaling groups are a logical grouping of auto scaled instances. In order for AWS to automatically create application servers, you must create an Auto Scaling group with CloudWatch alarms that trigger Auto Scaling.

In the AWS Management Console, from the Services menu at the top of the screen, select EC2.
In the Navigation pane, under AUTO SCALING, select Auto Scaling groups and Create Auto Scaling group.
Specify settings appropriate for your use.
Setting
Details
Group name
Type the autoscale-group name you specified when you defined the Auto Scaling resources in the iApp.
Network and Subnet
Select the virtual private cloud (VPC) and its subnet (10.0.0.0/24).
Receive traffic from Elastic Load Balancer(s)
Clear this check box. Traffic to the pool members is coming from BIG-IP VE, not the AWS ELB.
Use scaling policies to adjust the capacity of this group
Select this option, enter the minimum and maximum number of instances, and create alarms that will trigger Auto Scaling.




When done, click Create Auto Scaling group.

New instances will be created and removed based on the alarms you created. When new instances start, BIG-IP VE will add them to the pool. When instances terminate, they will no longer be active in the pool.












 

 
 

 






 
Overview: Configuring cost-based load balancing

 
 


Important: This functionality is not currently available in the U.S.

  
 You can
   configure BIG-IP
   Link Controller to use cost-based load balancing to manage the traffic
   flowing in and out of a network. In cost-based load balancing, you prioritize link usage based on
   the cost of the bandwidth for the connection to the Internet. Link Controller sends traffic to
   the link that is currently operating at the lowest cost. As the usage cost for each link changes,
   Link Controller dynamically shifts traffic to the best link.

  
The following illustration shows a network for configuring a cost-based load balancing
   configuration.

  

   
  
Example of a network for configuring cost-based load balancing


  

  As the illustration shows, while traffic remains below a certain level (for example, 4 Mbps),
   the Link Controller uses the Primary Link. If traffic exceeds a certain level (for example, 4
   Mbps), the Link Controller sends the overflow traffic to the Secondary Link. If a link goes
   offline for any reason, Link Controller uses the Alternate and Fallback load balancing methods to
   route traffic through an available link.

 








 
Task summary

 
 


Important: This functionality is not currently available in the U.S.

  
Use the
   tasks in this implementation to create a cost-based, load balancing configuration to manage the
   traffic flowing in and out of a network.

  

Task list
   
  


 






    
Creating the first cost-based link for load balancing

    
    

        
Gather the IP address of the router associated with the ISP and IP address that
            corresponds with the external Internet connection. In addition, determine an amount of
            appropriate bandwidth for the link.

        
Create and configure the first link on Link Controllerto
            specify how traffic enters and leaves your network.

        


                
On the Main tab, click Link Controller > Links.
                 The Links List screen opens.
            


                
Click Create.
                 The New Link screen opens.
            


                
In the Name field, type a name for the link.
                 
                    

Important: Link names are limited to 63
                        characters.

                
            



                
In the Router Address field, type the IP address of the
                    router.
            



                
In the Uplink Address field, type the IP address that
                    corresponds with the external Internet connection.
            



                
For the Service Provider field, type the name of the ISP
                    provider.    
            



                
From the Configuration list, select
                        Advanced.
                 Additional controls display on the screen.
            


                
From the Weighting list, select Price
                        (Dynamic Ratio).
            



                
From the Prepaid Segment field, type the amount of
                    bandwidth that is prepaid for the link.
            



                
From the Incremental Segments field, add the incremental
                    segment price.
            



                
Click Create.
                 The Link List screen displays.
            



    








    
Creating the second cost-based link for load balancing

    
    

        
Gather the IP address of the router associated with the ISP and IP address that
            corresponds with the external Internet connection. In addition, determine an amount of
            appropriate bandwidth for the link.

        
Create and configure the second link on Link Controllerto specify how traffic enters and leaves your network.
        

        


                
On the Main tab, click Link Controller > Links.
                 The Links List screen opens.
            


                
Click Create.
                 The New Link screen opens.
            


                
In the Name field, type a name for the link.
                 
                    

Important: Link names are limited to 63
                        characters.

                
            



                
In the Router Address field, type the IP address of the
                    router.
            



                
In the Uplink Address field, type the IP address that
                    corresponds with the external Internet connection.
            



                
For the Service Provider field, type the name of the ISP
                    provider.    
            



                
From the Configuration list, select
                        Advanced.
                 Additional controls display on the screen.
            


                
From the Weighting list, select Price
                        (Dynamic Ratio).
            



                
From the Prepaid Segment field, type the amount of
                    bandwidth that is prepaid for the link.
            



                
Click Create.
                 The Link List screen displays.
            


                
From the Incremental Segments field, add the incremental
                    segment price.
            




    








    
Creating a default gateway pool

    
    

        
Gather the IP addresses associated with each link.

        
Create a default gateway pool to load balance the outbound traffic across the
            links.

        


    
On the Main tab, click Local Traffic > Pools. 
     The Pools list screen opens.
   


    
Click Create.
   



    
In the Name field, type a name for the pool.
     Names must begin with a letter, and can contain only letters, numbers, and the underscore
     (_) character.
Important: The pool name is limited to 63 characters.

   



     
In the New Members area, add the IP addresses associated with each link.
     

      

       
In the Address field, type the IP address.
      


      

       
Click Add.
      


     


    



    
Click Finished.
   




    








    
Creating a default route to the Internet 

    
    

       
        
Configure Link Controller to use the pool as the default
            gateway connection between the internal network and the Internet.

        


                
On the Main tab, click Network > Routes.
            



                
Click Add.
                 The New Route screen opens.
            


                
In the Name field, type a unique name.
            



                
From the Resource list, select Use
                        Pool.
            



                
From the Pool list, select
                        default_gateway_pool.
            



                
Click Finished.
            




    








    
Creating virtual servers to load balance connections across servers

    
    

        
Gather the IP addresses you want to use for creating the virtual servers.

        
Create two virtual servers, one for each link, to load balance inbound connections
            across the servers on the network.

        


                
On the Main tab, click Local Traffic > Virtual Servers.
                 The Virtual Server List screen opens.
            


                
Click the Create button.
                 The New Virtual Server screen opens.
            


                
In the Name field, type a unique name for the virtual
                    server. 
            



                
In the Destination Address field, type the IP address
                    you want to use for the virtual server.
            



                
In the Service Port field, type
                        80, or select HTTP from the
                    list. 
            



                
Click Finished.
            



                
Repeat these steps to create the second virtual server.
            




    








    
Creating a wildcard virtual server

    
    

        
Create a wildcard server to load balance outbound connections across the routers. 

        


                
On the Main tab, click Local Traffic > Virtual Servers.
                 The Virtual Server List screen opens.
            


                
Click the Create button.
                 The New Virtual Server screen opens.
            


                
In the Name field, type a unique name for the virtual
                    server. 
            



                
For the Destination setting, select
                        Host, and type 0.0.0.0 in the
                        Address field.
            



                
In the Service Port field, type
                    0.
                 
                    

Note: Port 0 defines a wildcard virtual
                        server that handles all types of services. If you specify a port number, you
                        create a port-specific wildcard virtual server. In that case, the wildcard
                        virtual server handles traffic only for the specified port. 

                
            



                
Click Finished.
            




    








    
Creating a wide IP

    
    

        
Before you can create a wide IP, you need IP addresses from two previously created
            virtual servers.

        
Create a wide IP to which Link Controller load balances
            incoming DNS requests.

        


    
On the Main tab, click Link Controller > Inbound Wide IPs. 
     The Wide IP List screen opens.
   


    
Click Create.
     The New Wide IP screen opens.
   


     
In the Name field, type a name for the wide IP.
    



     
From the Load Balancing Method list, make selections from the Preferred, Alternate, 
      and Fallback lists.
    



     
For the Member List field, add the address of the appropriate virtual server.
     

      

       
From the Virtual Server list, select a virtual server.
      


      

       
Click Add.
      


     


    



    
Click Create.
   




    










 
Implementation result

 
 

  
You now have Link Controller configured to use cost-based load balancing
   to manage DNS traffic. 

 












	        
Downloading the EUD Files

	
	        


         

	           
Deciding which files to download

	
	           

		             
There are several file types available from the F5® 
			download site http://downloads.f5.com for the EUD.

		
               

                  

				
				
				                 

					                   

						                     
File Name

						                     Description

					                   


				                 


				                 

					
					                   

						                     
IM file

						                     The IM file is a self-extracting installation file. You can
								scp this file directly to the VIPRION®
                               system and use it
							to upgrade the EUD on the system or load a USB flash
							drive.

					                   


					                   

						                     
MD5 file

						                     There is a corresponding MD5 file for each  IM file that 
							you download. Use the MD5 file to verify the integrity of the 
							file you download.

					                   


					                   

						                     
Readme-EUD.txt

						                     This file includes details about the release, such as
							supported platforms.

					                   


				                 


			               

               


	           


            

               
Determining the EUD version installed on the system

    
               

                  
Perform this task before you download update files to determine the EUD 
        	version installed on your system, or to verify that the installation of a new 
        	version was successful.

                  
To run the eud_info command and determine the EUD 
        	version installed on your system:

                  

                     

				                    
Log on to the command line of the system using an account with root 
					access.
			                  

                     

                        
Verify the EUD version installed on your system.
                        

                           
eud_info
                        

                     

                  


                  
The version number of the EUD installed on the system displays.

               


            

            

               
Downloading the EUD IM file from F5 Networks

    
               

                  
We recommend that you obtain the latest version of the EUD that is 
        	supported on your platform from the F5® download site 
        	(http://downloads.f5.com) before you run these tests.

                  

                     

                        
Log on to http://downloads.f5.com/ and click 
                	Find a Download.
                     

                     

                        
In the Hardware-Specific area, click
                    Platform / EUD.
                     

                     

                        
Select your platform from the list.
                     

                     

                        
Click the name of the release with the most recent date.
                        
You must accept the software terms and conditions before you can 
                	proceed.
                     

                     

                        
Click the file name <file_name>.im to start 
                	the download.
                        
The <file_name> consists of the platform 
                	family and the build number.
                        

                           

                              
Note: You should copy the IM file to 
                	/var/tmp on the system you intend to update.
                        

                     

                     

                        
Download the corresponding checksum file.
                        
The corresponding checksum file has the same name as the IM file, 
                	except that .md5 is the file extension.
                     

                  


                  
After the download is complete, you should verify the integrity of the 
        	file by checking the MD5 checksum.

               


            

         

      







Checklist: Auto Scaling application servers in AWS
This checklist summarizes the tasks required for BIG-IP® VE to discover application server (pool member) instances created by the AWS Auto Scaling service.

In BIG-IP VE, define attributes for future pool members BIG-IP VE needs to know how new pool members should be configured. Use an iApp for this information. In BIG-IP VE, set up pool member discovery BIG-IP VE will poll AWS every 10 minutes and update the pool with the latest pool members. You can change this interval. In AWS, create an image (AMI) of the application server instance you want to scale You will specify the image when you create the AWS launch configuration. In AWS, create the launch configuration, Auto Scaling group, and CloudWatch alarms The name you entered in the BIG-IP VE iApp for the pool member Auto Scaling group must be the name of the pool member Auto Scaling group in AWS. Each time a new application server instance is created, it is added to the BIG-IP pool.
Watch how to use Auto Scaling with application server instances in AWS

Define future pool member attributes
You must specify the properties that BIG-IP® VE should use when creating new pool members.

Log in to the BIG-IP Configuration utility.
On the Main tab, click iApps > AWS .
On the Application Service List screen, click Create.
In the Name field, type a name for the Auto Scaling template that will be used to configure new instances.
From the Template list, select the template f5-iAppLX-aws-autoscale and click Next.
In the Pool Name field, type the name of the pool you created in BIG-IP VE.
In the AWS AutoScale Group Name field, type the name of the Auto Scaling group. You will use this name in AWS when you create the Auto Scaling group.Important: If you have other Auto Scaling groups in AWS, ensure that this name is not a duplicate of one that already exists.


In the Port Number field, type the port number, based on the type of application this pool member serves.
Configure remaining settings as needed.
At the bottom of the screen, click Deploy to save your changes.



Set up pool member discovery
Communication must be set up so that BIG-IP® VE can discover application server (pool member) instances created by the AWS Auto Scaling service.

Use SSH to log in to the BIG-IP VE as admin.Ensure you are at the tmsh prompt, not the bash prompt.

Load a script that BIG-IP VE uses to poll AWS periodically for the list of active pool members.load sys config merge file /usr/share/aws/autoscale/aws-autoscale-icall-config

Save the changes.save /sys config


Polling happens every 10 minutes (600 seconds). To change the interval, run this case-sensitive tmsh command: modify sys icall handler periodic autoscaleHandler interval <number_of_seconds>
Now create an image (AMI) of the application server so you can use it for Auto Scaling.


Create a launch configuration for pool members
Before you can create a launch configuration for a pool member, you must have an Amazon machine image (AMI) of the pool member you want to use for Auto Scaling.
A launch configuration is a template that determines how new virtual instances will be launched.Note: Launch configurations cannot be revised after they are created.


In the AWS Management Console, from the Services menu at the top of the screen, select EC2.
In the Navigation pane, under AUTO SCALING, select Launch Configurations.
From the My AMIs list, select the pool member image.
Specify settings appropriate for your use.
Setting
Details
Enable CloudWatch detailed monitoring
Select this option.
Advanced Details > IP Address Type > Assign a public IP address to every instance
Select this option to assist with troubleshooting.
Advanced Details > User data > As text
If you want to use different credentials to launch new instances, enter this text:AWS_ACCESS_KEY,<user_access_key>
AWS_SECRET_KEY,<user_secret_key>

Configure Security Group
Select an existing group that is associated with the VPC.




Click Create launch configuration.



Create an Auto Scaling group for pool members
Auto Scaling groups are a logical grouping of auto scaled instances. In order for AWS to automatically create application servers, you must create an Auto Scaling group with CloudWatch alarms that trigger Auto Scaling.

In the AWS Management Console, from the Services menu at the top of the screen, select EC2.
In the Navigation pane, under AUTO SCALING, select Auto Scaling groups and Create Auto Scaling group.
Specify settings appropriate for your use.
Setting
Details
Group name
Type the autoscale-group name you specified when you defined the Auto Scaling resources in the iApp.
Network and Subnet
Select the virtual private cloud (VPC) and its subnet (10.0.0.0/24).
Receive traffic from Elastic Load Balancer(s)
Clear this check box. Traffic to the pool members is coming from BIG-IP VE, not the AWS ELB.
Use scaling policies to adjust the capacity of this group
Select this option, enter the minimum and maximum number of instances, and create alarms that will trigger Auto Scaling.




When done, click Create Auto Scaling group.

New instances will be created and removed based on the alarms you created. When new instances start, BIG-IP VE will add them to the pool. When instances terminate, they will no longer be active in the pool.










         

 
         

  
 


         

            
About VE Xen Project deployment

    
            

               
To deploy the iWorkflow® Virtual Edition (VE) system on Xen Project, you perform these tasks:

               

                  
Verify the host machine requirements.

                  
Deploy an iWorkflow® system as a virtual machine.

                  
Deploy a BIG-IP® system.

                  
After you have deployed the virtual machines, log in to the iWorkflow VE system
                and run the Setup utility. Using the Setup utility, you perform basic network
                configuration tasks, such as assigning VLANs to interfaces.

                  
Configure secure communication between the iWorkflow system and the BIG-IP device.

               



            


            

               
Host machine requirements and recommendations

  
  
               

                  
To successfully deploy and run the iWorkflow® VE system, the host
    system must satisfy minimum requirements.

                  

      
                     
The host system must include these elements:

                     

        
        
        
        
        
        
                        
CentOS, Debian, Fedora, RHEL, or Ubuntu with the Community Xen
          package. The F5 iWorkflow Supported Hypervisors Matrix, published on the AskF5™ web site, http://support.f5.com identifies
          the Linux versions that are supported.

        
        
        
        
        
        
        
        
        
                     


      
                  


               


            

            

               
Deploying the iWorkflow VE virtual machine

    
               

                  

                     
The primary task in deploying iWorkflow™ VE on the open source
                Xen Project environment is creating and executing a configuration file that sets
                up most of what you need to get up and running. 

                     

                        
Important: Do not modify the configuration of the Xen Project guest environment with settings less powerful than the
                ones recommended in this document. This includes the settings for the CPU, RAM, and
                network adapters. Doing so might produce unexpected results.

                  


                  

                     

                        
In a browser, open the F5 Downloads page
                        (https://downloads.f5.com).
                     

                     

                        
Download the iWorkflow v2.x/Virtual Edition file package. The file name ends in
                        .qcow2.zip.
                        
The file package creates a 95GB disk footprint at installation.
                     

                     

                        
Extract the two files from the Zip archive and save it where your
                        qcow2 files reside on the Xen Project server.
                        

                           

                              
Important: Two files are created when you extract the qcow file.
                    You must install the larger file first. 
                                 
The name of the larger file is similar to
                                    iWorkflow-2.0.0.0.0.<build_number>.qcow2. 

                                 
The name of the smaller file is similar to
                                    iWorkflow-2.0.0.0.0.<build_number>.DATASTOR.LTM.qcow2. 

                              

                           

                        

                     

                     

                        
Generate a MAC address for the network interface card associated with the
                    management interface.
                        

                           

                              
Important: Be sure that the MAC address you create starts with the
                        prefix 00:16:3e:.
                        

                        
To create this address, you can use a tool such as MAC Address Generator
                        (http://www.miniwebtool.com/mac-address-generator/).
                
                     

                     

                        
Use an editor to create an iWorkflow VM definition file that specifies the
                    required parameters for your VM.

                        

                           
# vi /etc/xen/<config_file_name>
                           

                              
Important: The sample configuration file provided here serves only
                        as an example of the kinds of parameters you need to specify for your
                        virtual machine. The actual file that you create will likely contain
                        different parameters and settings. 

                           

                    name = <config_file_name>
                    maxmem = 4096
                    memory = 4096
                    vcpus = 2
                    builder = "hvm"
                    boot = "c"
                    pae = 1
                    acpi = 1
                    apic = 1
                    hpet = 1
                    localtime = 0
                    on_poweroff = "destroy"
                    on_reboot = "restart"
                    on_crash = "restart"
                    sdl = 0
                    vnc = 1
                    vncunused = 1
                    keymap = "en-us"
                    disk = [ 'tap:qcow2:/<vdisk_path>/iWorkflow-2.0.0.0.0.<build_number>.qcow2,hda,w', 
                              'tap:qcow2:/<vdisk_path>/iWorkflow-2.0.0.0.0.<build_number>.DATASTOR.LTM.qcow2,hdb,w',]
                    vif = [ "mac=00:16:<mgmt_interface_mac>,bridge=mgmtbr,script=vif-bridge",
                    "mac=00:16:3e:<external_interface_mac>,bridge=ext_bridge,script=vif-bridge",
                    "mac=00:16:3e:<internal_interface_mac>,bridge=int_bridge,script=vif-bridge",]
                    parallel = "none"
                    serial = "pty"
                    #pci = [ '05:10.0', '05:10.1' ]
                    

                        

                        

                           

                              
Important: The last line of the example configuration file
                        contains an optional entry that specifies the IDs for PCI external and
                        internal network interface cards (NIC). This optional entry is required for
                        SR-IOV support. Naturally, if you use this entry, you omit the external and
                        internal bridges specified in the vif section.
                    
                        

                        
Once you have perfected and saved your configuration file, you are ready
                    to create the iWorkflow VM, 
                     

                     

                        
Run the configuration file using an open source tool such as
                        xm.
                        

                           
xm create
                    /etc/xen/<config_file_name>
                        

                        
The console should indicate a successful start up by displaying
                    something similar to this: Started domain
                        <config_file_name>(id=444).
                     

                     

                        
Allow some time for the boot-up process; then, you should be able to connect to
                    the iWorkflow console.
                        

                           
# xm console <config_file_name>
                        
 
                
                     

                  


        
               


               

                  
Powering on the virtual machine

    
                  

                     
You must power on the virtual machine before you
            can begin assigning IP addresses.

                     


                  


               

               

                  
Assigning a management IP address to a virtual machine

    
                  

                     
The virtual machine needs an IP address assigned to its virtual management port.
                
                           
Tip: The default configuration for new deployments and installations is
                for DHCP to acquire the management port IP address.
                     


                     

                        

                           
At the password prompt, type default.
                        

                        

                           
Type config and press Enter.
                           
The F5 Management Port Setup screen opens.
                        

                        

                           
Click OK.
                        

                        

                           
If you want DHCP to automatically assign an address for the management port,
                    select Yes. Otherwise, select No
                    and follow the instructions for manually assigning an IP address and netmask for
                    the management port.
                        

                     


        
                     

                        

                           
Tip: F5 Networks® highly recommends that you specify a default route for the
                virtual management port, but it is not required for operation of the virtual
                machine.

                     


                  


               

            

         

      









 

 
 

 






 
Overview: Configuring cost-based load balancing

 
 


Important: This functionality is not currently available in the U.S.

  
 You can
   configure BIG-IP
   Link Controller to use cost-based load balancing to manage the traffic
   flowing in and out of a network. In cost-based load balancing, you prioritize link usage based on
   the cost of the bandwidth for the connection to the Internet. Link Controller sends traffic to
   the link that is currently operating at the lowest cost. As the usage cost for each link changes,
   Link Controller dynamically shifts traffic to the best link.

  
The following illustration shows a network for configuring a cost-based load balancing
   configuration.

  

   
  
Example of a network for configuring cost-based load balancing


  

  As the illustration shows, while traffic remains below a certain level (for example, 4 Mbps),
   the Link Controller uses the Primary Link. If traffic exceeds a certain level (for example, 4
   Mbps), the Link Controller sends the overflow traffic to the Secondary Link. If a link goes
   offline for any reason, Link Controller uses the Alternate and Fallback load balancing methods to
   route traffic through an available link.

 








 
Task summary

 
 


Important: This functionality is not currently available in the U.S.

  
Use the
   tasks in this implementation to create a cost-based, load balancing configuration to manage the
   traffic flowing in and out of a network.

  

Task list
   
  


 






    
Creating the first cost-based link for load balancing

    
    

        
Gather the IP address of the router associated with the ISP and IP address that
            corresponds with the external Internet connection. In addition, determine an amount of
            appropriate bandwidth for the link.

        
Create and configure the first link on Link Controllerto
            specify how traffic enters and leaves your network.

        


                
On the Main tab, click Link Controller > Links.
                 The Links List screen opens.
            


                
Click Create.
                 The New Link screen opens.
            


                
In the Name field, type a name for the link.
                 
                    

Important: Link names are limited to 63
                        characters.

                
            



                
In the Router Address field, type the IP address of the
                    router.
            



                
In the Uplink Address field, type the IP address that
                    corresponds with the external Internet connection.
            



                
For the Service Provider field, type the name of the ISP
                    provider.    
            



                
From the Configuration list, select
                        Advanced.
                 Additional controls display on the screen.
            


                
From the Weighting list, select Price
                        (Dynamic Ratio).
            



                
From the Prepaid Segment field, type the amount of
                    bandwidth that is prepaid for the link.
            



                
From the Incremental Segments field, add the incremental
                    segment price.
            



                
Click Create.
                 The Link List screen displays.
            



    








    
Creating the second cost-based link for load balancing

    
    

        
Gather the IP address of the router associated with the ISP and IP address that
            corresponds with the external Internet connection. In addition, determine an amount of
            appropriate bandwidth for the link.

        
Create and configure the second link on Link Controllerto specify how traffic enters and leaves your network.
        

        


                
On the Main tab, click Link Controller > Links.
                 The Links List screen opens.
            


                
Click Create.
                 The New Link screen opens.
            


                
In the Name field, type a name for the link.
                 
                    

Important: Link names are limited to 63
                        characters.

                
            



                
In the Router Address field, type the IP address of the
                    router.
            



                
In the Uplink Address field, type the IP address that
                    corresponds with the external Internet connection.
            



                
For the Service Provider field, type the name of the ISP
                    provider.    
            



                
From the Configuration list, select
                        Advanced.
                 Additional controls display on the screen.
            


                
From the Weighting list, select Price
                        (Dynamic Ratio).
            



                
From the Prepaid Segment field, type the amount of
                    bandwidth that is prepaid for the link.
            



                
Click Create.
                 The Link List screen displays.
            


                
From the Incremental Segments field, add the incremental
                    segment price.
            




    








    
Creating a default gateway pool

    
    

        
Gather the IP addresses associated with each link.

        
Create a default gateway pool to load balance the outbound traffic across the
            links.

        


    
On the Main tab, click Local Traffic > Pools. 
     The Pools list screen opens.
   


    
Click Create.
   



    
In the Name field, type a name for the pool.
     Names must begin with a letter, and can contain only letters, numbers, and the underscore
     (_) character.
Important: The pool name is limited to 63 characters.

   



     
In the New Members area, add the IP addresses associated with each link.
     

      

       
In the Address field, type the IP address.
      


      

       
Click Add.
      


     


    



    
Click Finished.
   




    








    
Creating a default route to the Internet 

    
    

       
        
Configure Link Controller to use the pool as the default
            gateway connection between the internal network and the Internet.

        


                
On the Main tab, click Network > Routes.
            



                
Click Add.
                 The New Route screen opens.
            


                
In the Name field, type a unique name.
            



                
From the Resource list, select Use
                        Pool.
            



                
From the Pool list, select
                        default_gateway_pool.
            



                
Click Finished.
            




    








    
Creating virtual servers to load balance connections across servers

    
    

        
Gather the IP addresses you want to use for creating the virtual servers.

        
Create two virtual servers, one for each link, to load balance inbound connections
            across the servers on the network.

        


                
On the Main tab, click Local Traffic > Virtual Servers.
                 The Virtual Server List screen opens.
            


                
Click the Create button.
                 The New Virtual Server screen opens.
            


                
In the Name field, type a unique name for the virtual
                    server. 
            



                
In the Destination Address field, type the IP address
                    you want to use for the virtual server.
            



                
In the Service Port field, type
                        80, or select HTTP from the
                    list. 
            



                
Click Finished.
            



                
Repeat these steps to create the second virtual server.
            




    








    
Creating a wildcard virtual server

    
    

        
Create a wildcard server to load balance outbound connections across the routers. 

        


                
On the Main tab, click Local Traffic > Virtual Servers.
                 The Virtual Server List screen opens.
            


                
Click the Create button.
                 The New Virtual Server screen opens.
            


                
In the Name field, type a unique name for the virtual
                    server. 
            



                
For the Destination setting, select
                        Host, and type 0.0.0.0 in the
                        Address field.
            



                
In the Service Port field, type
                    0.
                 
                    

Note: Port 0 defines a wildcard virtual
                        server that handles all types of services. If you specify a port number, you
                        create a port-specific wildcard virtual server. In that case, the wildcard
                        virtual server handles traffic only for the specified port. 

                
            



                
Click Finished.
            




    








    
Creating a wide IP

    
    

        
Before you can create a wide IP, you need IP addresses from two previously created
            virtual servers.

        
Create a wide IP to which Link Controller load balances
            incoming DNS requests.

        


    
On the Main tab, click Link Controller > Inbound Wide IPs. 
     The Wide IP List screen opens.
   


    
Click Create.
     The New Wide IP screen opens.
   


     
In the Name field, type a name for the wide IP.
    



     
From the Load Balancing Method list, make selections from the Preferred, Alternate, 
      and Fallback lists.
    



     
For the Member List field, add the address of the appropriate virtual server.
     

      

       
From the Virtual Server list, select a virtual server.
      


      

       
Click Add.
      


     


    



    
Click Create.
   




    










 
Implementation result

 
 

  
You now have Link Controller configured to use cost-based load balancing
   to manage DNS traffic. 

 












	        
Downloading the EUD Files

	
	        


         

	           
Deciding which files to download

	
	           

		             
There are several file types available from the F5® 
			download site http://downloads.f5.com for the EUD.

		
               

                  

				
				
				                 

					                   

						                     
File Name

						                     Description

					                   


				                 


				                 

					
					                   

						                     
IM file

						                     The IM file is a self-extracting installation file. You can
								scp this file directly to the VIPRION®
                               system and use it
							to upgrade the EUD on the system or load a USB flash
							drive.

					                   


					                   

						                     
MD5 file

						                     There is a corresponding MD5 file for each  IM file that 
							you download. Use the MD5 file to verify the integrity of the 
							file you download.

					                   


					                   

						                     
Readme-EUD.txt

						                     This file includes details about the release, such as
							supported platforms.

					                   


				                 


			               

               


	           


            

               
Determining the EUD version installed on the system

    
               

                  
Perform this task before you download update files to determine the EUD 
        	version installed on your system, or to verify that the installation of a new 
        	version was successful.

                  
To run the eud_info command and determine the EUD 
        	version installed on your system:

                  

                     

				                    
Log on to the command line of the system using an account with root 
					access.
			                  

                     

                        
Verify the EUD version installed on your system.
                        

                           
eud_info
                        

                     

                  


                  
The version number of the EUD installed on the system displays.

               


            

            

               
Downloading the EUD IM file from F5 Networks

    
               

                  
We recommend that you obtain the latest version of the EUD that is 
        	supported on your platform from the F5® download site 
        	(http://downloads.f5.com) before you run these tests.

                  

                     

                        
Log on to http://downloads.f5.com/ and click 
                	Find a Download.
                     

                     

                        
In the Hardware-Specific area, click
                    Platform / EUD.
                     

                     

                        
Select your platform from the list.
                     

                     

                        
Click the name of the release with the most recent date.
                        
You must accept the software terms and conditions before you can 
                	proceed.
                     

                     

                        
Click the file name <file_name>.im to start 
                	the download.
                        
The <file_name> consists of the platform 
                	family and the build number.
                        

                           

                              
Note: You should copy the IM file to 
                	/var/tmp on the system you intend to update.
                        

                     

                     

                        
Download the corresponding checksum file.
                        
The corresponding checksum file has the same name as the IM file, 
                	except that .md5 is the file extension.
                     

                  


                  
After the download is complete, you should verify the integrity of the 
        	file by checking the MD5 checksum.

               


            

         

      







Checklist: Auto Scaling application servers in AWS
This checklist summarizes the tasks required for BIG-IP® VE to discover application server (pool member) instances created by the AWS Auto Scaling service.

In BIG-IP VE, define attributes for future pool members BIG-IP VE needs to know how new pool members should be configured. Use an iApp for this information. In BIG-IP VE, set up pool member discovery BIG-IP VE will poll AWS every 10 minutes and update the pool with the latest pool members. You can change this interval. In AWS, create an image (AMI) of the application server instance you want to scale You will specify the image when you create the AWS launch configuration. In AWS, create the launch configuration, Auto Scaling group, and CloudWatch alarms The name you entered in the BIG-IP VE iApp for the pool member Auto Scaling group must be the name of the pool member Auto Scaling group in AWS. Each time a new application server instance is created, it is added to the BIG-IP pool.
Watch how to use Auto Scaling with application server instances in AWS

Define future pool member attributes
You must specify the properties that BIG-IP® VE should use when creating new pool members.

Log in to the BIG-IP Configuration utility.
On the Main tab, click iApps > AWS .
On the Application Service List screen, click Create.
In the Name field, type a name for the Auto Scaling template that will be used to configure new instances.
From the Template list, select the template f5-iAppLX-aws-autoscale and click Next.
In the Pool Name field, type the name of the pool you created in BIG-IP VE.
In the AWS AutoScale Group Name field, type the name of the Auto Scaling group. You will use this name in AWS when you create the Auto Scaling group.Important: If you have other Auto Scaling groups in AWS, ensure that this name is not a duplicate of one that already exists.


In the Port Number field, type the port number, based on the type of application this pool member serves.
Configure remaining settings as needed.
At the bottom of the screen, click Deploy to save your changes.



Set up pool member discovery
Communication must be set up so that BIG-IP® VE can discover application server (pool member) instances created by the AWS Auto Scaling service.

Use SSH to log in to the BIG-IP VE as admin.Ensure you are at the tmsh prompt, not the bash prompt.

Load a script that BIG-IP VE uses to poll AWS periodically for the list of active pool members.load sys config merge file /usr/share/aws/autoscale/aws-autoscale-icall-config

Save the changes.save /sys config


Polling happens every 10 minutes (600 seconds). To change the interval, run this case-sensitive tmsh command: modify sys icall handler periodic autoscaleHandler interval <number_of_seconds>
Now create an image (AMI) of the application server so you can use it for Auto Scaling.


Create a launch configuration for pool members
Before you can create a launch configuration for a pool member, you must have an Amazon machine image (AMI) of the pool member you want to use for Auto Scaling.
A launch configuration is a template that determines how new virtual instances will be launched.Note: Launch configurations cannot be revised after they are created.


In the AWS Management Console, from the Services menu at the top of the screen, select EC2.
In the Navigation pane, under AUTO SCALING, select Launch Configurations.
From the My AMIs list, select the pool member image.
Specify settings appropriate for your use.
Setting
Details
Enable CloudWatch detailed monitoring
Select this option.
Advanced Details > IP Address Type > Assign a public IP address to every instance
Select this option to assist with troubleshooting.
Advanced Details > User data > As text
If you want to use different credentials to launch new instances, enter this text:AWS_ACCESS_KEY,<user_access_key>
AWS_SECRET_KEY,<user_secret_key>

Configure Security Group
Select an existing group that is associated with the VPC.




Click Create launch configuration.



Create an Auto Scaling group for pool members
Auto Scaling groups are a logical grouping of auto scaled instances. In order for AWS to automatically create application servers, you must create an Auto Scaling group with CloudWatch alarms that trigger Auto Scaling.

In the AWS Management Console, from the Services menu at the top of the screen, select EC2.
In the Navigation pane, under AUTO SCALING, select Auto Scaling groups and Create Auto Scaling group.
Specify settings appropriate for your use.
Setting
Details
Group name
Type the autoscale-group name you specified when you defined the Auto Scaling resources in the iApp.
Network and Subnet
Select the virtual private cloud (VPC) and its subnet (10.0.0.0/24).
Receive traffic from Elastic Load Balancer(s)
Clear this check box. Traffic to the pool members is coming from BIG-IP VE, not the AWS ELB.
Use scaling policies to adjust the capacity of this group
Select this option, enter the minimum and maximum number of instances, and create alarms that will trigger Auto Scaling.




When done, click Create Auto Scaling group.

New instances will be created and removed based on the alarms you created. When new instances start, BIG-IP VE will add them to the pool. When instances terminate, they will no longer be active in the pool.










         

 
         

  
 


         

            
About VE Xen Project deployment

    
            

               
To deploy the iWorkflow® Virtual Edition (VE) system on Xen Project, you perform these tasks:

               

                  
Verify the host machine requirements.

                  
Deploy an iWorkflow® system as a virtual machine.

                  
Deploy a BIG-IP® system.

                  
After you have deployed the virtual machines, log in to the iWorkflow VE system
                and run the Setup utility. Using the Setup utility, you perform basic network
                configuration tasks, such as assigning VLANs to interfaces.

                  
Configure secure communication between the iWorkflow system and the BIG-IP device.

               



            


            

               
Host machine requirements and recommendations

  
  
               

                  
To successfully deploy and run the iWorkflow® VE system, the host
    system must satisfy minimum requirements.

                  

      
                     
The host system must include these elements:

                     

        
        
        
        
        
        
                        
CentOS, Debian, Fedora, RHEL, or Ubuntu with the Community Xen
          package. The F5 iWorkflow Supported Hypervisors Matrix, published on the AskF5™ web site, http://support.f5.com identifies
          the Linux versions that are supported.

        
        
        
        
        
        
        
        
        
                     


      
                  


               


            

            

               
Deploying the iWorkflow VE virtual machine

    
               

                  

                     
The primary task in deploying iWorkflow™ VE on the open source
                Xen Project environment is creating and executing a configuration file that sets
                up most of what you need to get up and running. 

                     

                        
Important: Do not modify the configuration of the Xen Project guest environment with settings less powerful than the
                ones recommended in this document. This includes the settings for the CPU, RAM, and
                network adapters. Doing so might produce unexpected results.

                  


                  

                     

                        
In a browser, open the F5 Downloads page
                        (https://downloads.f5.com).
                     

                     

                        
Download the iWorkflow v2.x/Virtual Edition file package. The file name ends in
                        .qcow2.zip.
                        
The file package creates a 95GB disk footprint at installation.
                     

                     

                        
Extract the two files from the Zip archive and save it where your
                        qcow2 files reside on the Xen Project server.
                        

                           

                              
Important: Two files are created when you extract the qcow file.
                    You must install the larger file first. 
                                 
The name of the larger file is similar to
                                    iWorkflow-2.0.0.0.0.<build_number>.qcow2. 

                                 
The name of the smaller file is similar to
                                    iWorkflow-2.0.0.0.0.<build_number>.DATASTOR.LTM.qcow2. 

                              

                           

                        

                     

                     

                        
Generate a MAC address for the network interface card associated with the
                    management interface.
                        

                           

                              
Important: Be sure that the MAC address you create starts with the
                        prefix 00:16:3e:.
                        

                        
To create this address, you can use a tool such as MAC Address Generator
                        (http://www.miniwebtool.com/mac-address-generator/).
                
                     

                     

                        
Use an editor to create an iWorkflow VM definition file that specifies the
                    required parameters for your VM.

                        

                           
# vi /etc/xen/<config_file_name>
                           

                              
Important: The sample configuration file provided here serves only
                        as an example of the kinds of parameters you need to specify for your
                        virtual machine. The actual file that you create will likely contain
                        different parameters and settings. 

                           

                    name = <config_file_name>
                    maxmem = 4096
                    memory = 4096
                    vcpus = 2
                    builder = "hvm"
                    boot = "c"
                    pae = 1
                    acpi = 1
                    apic = 1
                    hpet = 1
                    localtime = 0
                    on_poweroff = "destroy"
                    on_reboot = "restart"
                    on_crash = "restart"
                    sdl = 0
                    vnc = 1
                    vncunused = 1
                    keymap = "en-us"
                    disk = [ 'tap:qcow2:/<vdisk_path>/iWorkflow-2.0.0.0.0.<build_number>.qcow2,hda,w', 
                              'tap:qcow2:/<vdisk_path>/iWorkflow-2.0.0.0.0.<build_number>.DATASTOR.LTM.qcow2,hdb,w',]
                    vif = [ "mac=00:16:<mgmt_interface_mac>,bridge=mgmtbr,script=vif-bridge",
                    "mac=00:16:3e:<external_interface_mac>,bridge=ext_bridge,script=vif-bridge",
                    "mac=00:16:3e:<internal_interface_mac>,bridge=int_bridge,script=vif-bridge",]
                    parallel = "none"
                    serial = "pty"
                    #pci = [ '05:10.0', '05:10.1' ]
                    

                        

                        

                           

                              
Important: The last line of the example configuration file
                        contains an optional entry that specifies the IDs for PCI external and
                        internal network interface cards (NIC). This optional entry is required for
                        SR-IOV support. Naturally, if you use this entry, you omit the external and
                        internal bridges specified in the vif section.
                    
                        

                        
Once you have perfected and saved your configuration file, you are ready
                    to create the iWorkflow VM, 
                     

                     

                        
Run the configuration file using an open source tool such as
                        xm.
                        

                           
xm create
                    /etc/xen/<config_file_name>
                        

                        
The console should indicate a successful start up by displaying
                    something similar to this: Started domain
                        <config_file_name>(id=444).
                     

                     

                        
Allow some time for the boot-up process; then, you should be able to connect to
                    the iWorkflow console.
                        

                           
# xm console <config_file_name>
                        
 
                
                     

                  


        
               


               

                  
Powering on the virtual machine

    
                  

                     
You must power on the virtual machine before you
            can begin assigning IP addresses.

                     


                  


               

               

                  
Assigning a management IP address to a virtual machine

    
                  

                     
The virtual machine needs an IP address assigned to its virtual management port.
                
                           
Tip: The default configuration for new deployments and installations is
                for DHCP to acquire the management port IP address.
                     


                     

                        

                           
At the password prompt, type default.
                        

                        

                           
Type config and press Enter.
                           
The F5 Management Port Setup screen opens.
                        

                        

                           
Click OK.
                        

                        

                           
If you want DHCP to automatically assign an address for the management port,
                    select Yes. Otherwise, select No
                    and follow the instructions for manually assigning an IP address and netmask for
                    the management port.
                        

                     


        
                     

                        

                           
Tip: F5 Networks® highly recommends that you specify a default route for the
                virtual management port, but it is not required for operation of the virtual
                machine.

                     


                  


               

            

         

      



